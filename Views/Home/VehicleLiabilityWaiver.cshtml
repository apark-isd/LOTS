@{
    ViewBag.Title = "Vehicle Liability Waiver";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    p {line-height: 1em;}
    strong {font-weight:bold;}
    div {vertical-align:bottom;}
    .mt-3 {
        margin-top: 0 !important;
    }
    .lb-md {
        font-size: 17px;
        font-weight: 500;
        color: black;
        width: auto;
    }
    .form-control:focus:active {
        background-color: #e6e6ff !important;
        border-color: #e6e6ff;
    }
    .form-control{
        background-color: #e6e6ff !important;
        border-color: #e6e6ff;
        font-weight:bold;
        color: black;
       /* width:auto;*/
    }
    .ml1{
        margin-left: 1em;
    }
    .ml2{
        margin-left: 2em;
        color: black;
    }
    .ml3 {
        margin-left: 3em;
        color: black;
    }
    .ml4 {
        margin-left: 4em;
        color: black;
    }
</style>
<form>
<div class="card border-0">
    <div class="row mt-1 mb-4 align-middle">
        <div class="col ml-lg-3 align-middle">
            <h3><strong>ISD PARKING SERVICES</strong></h3>
            <h5>Telephone: (213)974-9505</h5>
            <h5>E-mail: <a href="mailto:ISDParkingRequest@isd.lacounty.gov"><u>ISDParkingRequest@isd.lacounty.gov</u></a></h5>
        </div>
        <div class="col mr-lg-3 align-middle">
            <img src="~/img/ISD_02.png" style="width:110px; height:110px;" align="right"/>
        </div>
    </div>
    <div class="form-group border border-dark">
        <div class="form-group border border-dark font-weight-bold text-center p-1 mb-2 bg-dark text-white">
            VEHICLE LIABILITY WAIVER
        </div>
        <div class="form-group font-weight-bold text-center mt-lg-3 mb-lg-3 text-danger h5">
            <u>Subject to review & approval by ISD Parking Services</u>
        </div>
        <div class="form-group ml1 font-weight-bold lh-lg text-dark">
            Forms must be submitted to <a href="mailto:ISDParkingRequest@isd.lacounty.gov" class="text-primary"><u>ISD Parking Services</u></a> via email by 2:00 PM for same day requests,
            or 24-hours in adance for future requests.
        </div>
        <div class="ml2 mb-2 row">
            <label for="DateRequested" class="lb-md">Date(s) Requested:</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="dateRequested" style="width: 200px">
            </div>
        </div>
        <div class="ml2 mb-4 row">
            <label for="ReasonForRequested" class="lb-md">Reason for Request:</label>
            <div class="col-sm-9">
                <input type="text" class="form-control" id="reasonForRequest">
            </div>
        </div>
        <div class="ml2 mb-2 row">
            <p class="h6"><u><strong>Vehicle Owner's Information</strong></u></p>
        </div>
        <div class="ml2 mb-4 row">
            <label for="Name" class="lb-md ">Name:</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" id="name">
            </div>
        </div>
        <div class="ml2 mb-1 row">
            <p class="lb-md">County of Los Angeles Employee? (Mark Appropriate Box)</p>
        </div>
        <div class="ml4 mb-1 row">
            <input class="form-check-input" type="checkbox" id="yesEmployeeCheck">
            <label class="form-check-label" for="yesEmployeeNumber">Yes - Employee Number:</label>
            <div class="col-sm-2">
                <input type="text" class="form-control" id="employeeNumber">
            </div>
            <label for="department">Department:</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" id="department">
            </div>
        </div>
        <div class="ml4 mb-4 row">
            <input class="form-check-input" type="checkbox" id="noCompanyCheck">
            <label class="form-check-label" for="gridCheck">No - Company</label>
        </div>
        <div class="ml2 mb-2 row">
                <p class="h6"><strong>Parking Lot Information:</strong></p>
        </div>
        <div class="ml2 mb-4 row">
            <label for="LotNumber">Lot Number:</label>
            <div class="col-sm-2">
                <input type="text" class="form-control" id="lotNumber" />
            </div>
            <label for="permitNumber">Permit Number(if applicable)</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" id="permitNumber" />
            </div>
        </div>
        <div class="ml2 mb-2 row">
            <p class="h6"><strong>Vehicle Information:</strong></p>
        </div>
        <div class="ml2 mb-2 row">
            <label for="year">Year:</label>
            <div class="col-sm-2">
                <input type="text" class="form-control" id="year" />
            </div>
            <label for="makeModel">Make/Model:</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="makeModel" />
            </div>
            <label for="color">Color:</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="color" />
            </div>
        </div>
        <div class="ml2 mb-4 row">
            <label for="licensePlateNumber">License Plate Number:</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" id="licensePlateNumber" />
            </div>
        </div>
        <div class="form-group border border-dark font-weight-bold text-center p-1 mb-2 bg-secondary text-dark">
            DISCLAIMER AND SIGNATURE
        </div>
        <div class="form-group ml-3 font-weight-bold lh-lg">
            I agree that the County of Los Angeles <b><u>WILL NOT</u></b> be held responsible for any damages
            or loss to my vehicle, or liability incurred by my vehicle, while parked in this parking lot on the date(s) requested above.</p>
        </div>
        <div class="form-group row ml-2">
            <button type="button" class="btn btn-primary btnSignature" data-toggle="modal" data-target="#signatureModal">Signature</button>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="signedBy" disabled />
            </div>
        </div>
    </div>
    </div>
</form>
<div class="modal fade" id="signatureModal" tabindex="-1" aria-labelledby="signatureModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="signatureModalLabel">Please Enter Username and Password</h5>
                <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                <div class="mb-3">
                    <label for="employeeNo" class="col-form-label">Username:</label>
                    <input id="employeeNo" placeholder="Employee Number" type="text" />
                </div>
                <div class="mb-3">
                    <label for="password" class="col-form-label">Password:</label>
                    <input id="password" placeholder="Password" type="password" />
                </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" id="btnSignature" class="btn btn-primary" data-dismiss="modal">Signature</button>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12 text-right">
        <button id="btnPrint" class="btn btn-primary ignoreForPdf">Print</button>
    </div>
</div>
@section Scripts{
<script type="text/javascript">

$(document).ready(function(){
    $("#dateRequested").datepicker({
        //numberOfMonths: 3,
        dateFormat: "d MM, yy",
        //minDate: new Date(2024, 0, 1),
        //maxDate: new Date(2024, 11, 31),
        showButtonPanel: true,
        changeMonth: true,
        changeYear: true
    });
});

$("#btnPrint").click(function() {
    $(".ignoreForPdf").hide();
    $(".btnSignature").hide();
    window.print();
    $(".ignoreForPdf").show();
    $(".btnSignature").show();
});

//$("printPDF").click(function(){
//    var element = document.getElementById('parentDiv');
//    html2pdf().from(element).set({
//        margin: [30, 10, 5, 10],
//        pagebreak: { avoid: 'tr' },
//        jsPDF: { orientation: 'landscape', unit: 'pt', format: 'letter', compressPDF: true }
//    }).save()
//});
//window.onload = function(){
//    document.getElementById("download")
//    .addEventListener("click",()=>{
//        const invoice = this.document.getElementById("invoice");
//        console.log(invoice);
//        console.log(window);
//        var opt = {
//            margin: 1,
//            filename: 'myfile.pdf',
//            image: {type: 'jpeg', quality: 0.98},
//            html2canvas: { scale: 2},
//            jsPDF: {unit: 'in', format: 'letter', orientation: 'portrait'}
//        };
//        html2pdf().from(invoice).set(opt).save();
//    })
//}

$(function()
{
    $('#btnSignature').on("click", function()
    {   
        var url = '@Url.Action("GetSignature","Home")';
        {
            $.ajax
            ({
                url: url,
                data: 
                {employeeNo: $('#employeeNo').val(),
                    password: $('#password').val(),},
                type: 'GET',
                success: function(result)
                {$('#signedBy').val(result.value);}
            });
        }
    }
    );
}
)
</script>
}